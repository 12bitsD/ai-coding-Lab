# 让 AI 写 PRD，然后让 AI 读懂它

> 核心观点：PRD 的写法决定了 AI 写代码的质量。想让 AI 当主力开发，先学会写 "AI-readable PRD"。

## 背景

我是个后端工程师，最近在做一个叫 ConceptTree 的项目——一个 AI 学习路径规划器。

选这个项目做实验，有三个原因：

1. **规模合适**：3-5 个核心页面，够复杂到能暴露问题，又不至于失控
2. **我不擅长前端**：正好测试 AI 能不能补我的能力短板
3. **有 AI 功能**：产品本身要接 AI，能形成 "AI 写 AI 产品" 的套娃结构

## 核心发现：PRD 的写法决定代码质量

一个反直觉的发现：**AI 写代码写得烂，往往不是 AI 的问题，是你的需求描述有问题。**

传统 PRD 是写给人看的——可以模糊，可以跳跃，读的人会自己脑补。

但 AI 不会脑补：
- 你漏了一个状态，它就真的不处理
- 你没说错误情况，它就真的不考虑
- 你用了模糊的词（"合适的"、"友好的"），它就随便实现

所以我需要一种 **"AI-readable PRD"**——不是格式变了，是决策粒度变了。

## 方法：用 AI 写 PRD，我来做选择题

```
传统：我写文档 → 给开发 → 开发问我一堆问题 → 改文档 → 循环
现在：AI 问我问题 → 我选答案 → AI 写文档 → 直接喂给 AI 写代码
```

核心变化：**把 "开发问我的问题" 前置到 PRD 阶段，用 AI 来问。**

### 启动 Prompt

```
我想做一个 [产品名]。
背景：[简单说明]
帮我做 PRD，苏格拉底式提问，每次只问一个问题，给 2-3 个选项让我选。
```

AI 会像产品经理一样追问：
- 目标用户是谁？
- 核心功能是什么？
- 这个状态流转怎么设计？
- 这个页面的空状态显示什么？

**我只需要选 A/B/C。**

## 8 步流程

| 步骤 | 做什么 | 我的角色 |
|------|--------|----------|
| 1. 启动 | AI 问澄清问题 | 回答 |
| 2. 定义概念 | AI 列核心实体和状态 | 选择/确认 |
| 3. 定页面结构 | AI 列页面和跳转 | 确认 |
| 4. 逐页细化 | AI 画 ASCII 图，逐元素问 | 选 A/B/C |
| 5. 定 AI 接口 | AI 定义输入输出 JSON | 确认 |
| 6. 定数据结构 | AI 输出表设计 | 确认 |
| 7. 输出 PRD | 说 "更新 PRD" | 验收 |
| 8. 对比实现 | 丢代码让 AI 检查差异 | 决策 |

**3 页 MVP，约 2 小时，50-80 次选择题。**

## Hack 1：ASCII 原型 > 线框图

别用 Figma 画原型再描述给 AI。直接让 AI 输出 ASCII 布局：

```
+------------------+
|     Header       |
+------------------+
|  [输入框]        |
|  [生成按钮]      |
+------------------+
|    结果区域      |
|  - 空状态: "..."  |
|  - 加载: spinner |
|  - 错误: retry   |
+------------------+
```

**为什么这样做？**

1. **AI 既能生成也能解析**：后面写代码时可以直接引用这个结构
2. **强制覆盖所有状态**：空状态、加载、错误都写在图里，不会漏
3. **修改成本低**：改几个字符就行，不用开 Figma

## Hack 2：状态枚举 > 自然语言描述

**不要这样写：**
> 用户可以创建学习计划，计划可以开始、完成或者存档。

**要这样写：**

```
学习计划状态：
- draft（草稿）→ 可编辑，不展示进度
- active（进行中）→ 展示进度，可标记完成
- completed（已完成）→ 只读，展示总结
- archived（已归档）→ 列表不展示，可恢复

流转规则：
- draft → active：用户点击 "开始学习"
- active → completed：所有节点标记完成
- any → archived：用户点击 "归档"
```

**为什么这样做？**

1. **明确每个状态的 UI 差异**：draft 不展示进度，active 展示进度
2. **明确流转条件**：不是 "可以完成"，而是 "所有节点标记完成时自动流转"
3. **AI 写状态机时不会漏**：枚举 + 流转规则 = 完整的状态机定义

## Hack 3：JSON Schema 定义 AI 接口

产品里有 AI 功能？别用自然语言描述输入输出。直接定义 JSON：

```json
// 输入
{
  "user_goal": "学会用 PyTorch 做图像分类",
  "time_budget_hours": 20,
  "current_level": "会 Python 基础"
}

// 输出
{
  "path": [
    {"node": "张量基础", "hours": 2, "dependencies": []},
    {"node": "自动求导", "hours": 3, "dependencies": ["张量基础"]},
    {"node": "神经网络基础", "hours": 4, "dependencies": ["自动求导"]},
    {"node": "CNN 原理", "hours": 3, "dependencies": ["神经网络基础"]},
    {"node": "图像分类实战", "hours": 8, "dependencies": ["CNN 原理"]}
  ],
  "total_hours": 20,
  "confidence": 0.85
}
```

**为什么这样做？**

1. **消除歧义**：字段名、类型、结构一目了然
2. **直接复用**：后面 AI 写代码时，复制这个 schema 就行
3. **便于验收**：AI 生成的代码是否符合 schema，一眼能看出来

## Hack 4：为 AI 维护留接口

PRD 里加一个 section 叫 "AI 维护指引"：

```markdown
## AI 维护指引

### 新增页面时
1. 在 pages/ 下新建文件夹
2. 复制 _template/ 结构
3. 更新 router.ts

### 新增状态时
1. 在 types/ 下更新枚举
2. 在 store/ 下更新 reducer
3. 搜索所有 switch case 补上

### 样式规范
- 间距使用 spacing.ts 里的常量
- 颜色使用 colors.ts 里的变量
- 不要写内联样式
```

**这段不是给人看的，是给后续让 AI 改代码时看的。**

当你说 "帮我加一个新页面"，AI 会按照这个指引执行，不会乱搞。

## 快捷指令表

在 PRD 流程中，这些指令可以加速对话：

| 场景 | 你说 |
|------|------|
| 推进流程 | `继续` |
| 不想纠结 | `你定` / `这个不重要` |
| 获取文档 | `更新 PRD` |
| 修改决定 | `XX 改成 YY` |
| 检查遗漏 | `回顾一下有没有遗漏` |
| 对比实现 | `和后端对比一下` + 上传文件 |
| 跳过当前页 | `跳过这页` |

## 时间参考

| 阶段 | 时长 | 你的操作 |
|------|------|----------|
| 启动+澄清 | 5 min | 回答 3-5 个问题 |
| 定义概念 | 5 min | 选 1-2 次 |
| 定页面结构 | 5 min | 确认 1 次 |
| 逐页细化 | 每页 15-30 min | 每页选 10-20 次 |
| 定 AI 接口 | 10 min | 确认 2-3 次 |
| 定数据结构 | 5 min | 确认 1 次 |
| 输出 PRD | 1 min | 说 "更新 PRD" |

**3 页产品 MVP**：约 2 小时，你做选择约 50-80 次

**复杂产品（10+ 页面）**：建议分模块多次进行，每次聚焦一个模块的核心页面

## 常见问题

### Q: 这套方法适合什么项目？

最适合：
- 0-1 阶段的 MVP
- 3-5 个核心页面
- ToC / AI-native 产品

不太适合：
- 复杂的企业级系统（需要更多架构设计）
- 纯后端服务（没有 UI 交互）

### Q: AI 问的问题我不知道怎么答？

说 `你定` 或 `这个不重要`。AI 会给一个默认方案继续推进。

关键是保持节奏，不要在不重要的细节上卡住。

### Q: PRD 写完后怎么喂给 AI 写代码？

这是下一篇要讲的内容。剧透一下，有三种方式：
- 整个 PRD 一次性喂
- 按页面拆分喂
- 先生成骨架再填充

## 本篇总结

**核心观点**：PRD 的写法决定了 AI 写代码的质量。想让 AI 当主力开发，先学会写 "AI-readable PRD"。

**关键实践**：
- 用 AI 问你问题，你来选答案
- ASCII 原型 > 线框图
- 状态枚举 > 自然语言
- JSON Schema 定义接口
- 为 AI 维护留指引

## 下一篇预告

PRD 写完了，下一步是让 AI 根据 PRD 生成代码。

我会尝试几种方式：
- **方式 A**：把整个 PRD 丢给 Claude/GPT，让它一次性生成
- **方式 B**：按页面拆分，逐个生成再组装
- **方式 C**：先让 AI 生成项目结构和骨架，再填充细节

然后对比哪种方式的代码质量更高、更容易维护。

---

*这个系列会持续更新。我在真实项目上踩坑，你看我踩坑结果就行。*
